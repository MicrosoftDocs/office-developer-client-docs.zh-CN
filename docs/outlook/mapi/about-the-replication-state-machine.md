---
title: 关于复制状态机
manager: soliver
ms.date: 03/09/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: cf36c6cb-57b4-7b2b-e23d-e0bc8696de96
description: 上次修改时间：2015 年 3 月 9 日
ms.openlocfilehash: a0644e4bf5c6847d61cc59e203d50f61ad142e84
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/28/2019
ms.locfileid: "33416480"
---
# <a name="about-the-replication-state-machine"></a><span data-ttu-id="eca19-103">关于复制状态机</span><span class="sxs-lookup"><span data-stu-id="eca19-103">About the Replication State Machine</span></span>

  
  
<span data-ttu-id="eca19-104">**适用于**：Outlook 2013 | Outlook 2016</span><span class="sxs-lookup"><span data-stu-id="eca19-104">**Applies to**: Outlook 2013 | Outlook 2016</span></span> 
  
<span data-ttu-id="eca19-105">本主题包含用于数据复制和Microsoft Outlook 2013 Microsoft Outlook 2010状态机的概述。</span><span class="sxs-lookup"><span data-stu-id="eca19-105">This topic contains an overview of the state machine for Microsoft Outlook 2013 and Microsoft Outlook 2010 data replication.</span></span>
  
> [!NOTE]
> <span data-ttu-id="eca19-106">复制 API 必须完全按照本主题中的说明实现，才能有用或受支持。</span><span class="sxs-lookup"><span data-stu-id="eca19-106">The Replication API must be fully implemented according to the instructions in this topic in order to be useful or supported.</span></span> <span data-ttu-id="eca19-107">复制 API 仅可用于将 2013 Outlook 2013 或 Outlook 2010 更改复制到服务器和从服务器复制。</span><span class="sxs-lookup"><span data-stu-id="eca19-107">The Replication API is available exclusively to replicate Outlook 2013 or Outlook 2010 changes to and from a server.</span></span> 
  
## <a name="iostx-and-the-state-machine"></a><span data-ttu-id="eca19-108">IOSTX 和状态机</span><span class="sxs-lookup"><span data-stu-id="eca19-108">IOSTX and the State Machine</span></span>

<span data-ttu-id="eca19-109">客户端按顺序调用 IOSTX：：SyncBeg、IOSTX：：SyncEnd、IOSTX：：SyncHdrBeg 和 **[IOSTX：：SyncHdrEnd，](iostx-synchdrend.md)** 以在本地存储与服务器之间同步 Outlook 2013 或 Outlook 2010 文件夹和项目。 **[](iostx-syncbeg.md)** **[](iostx-syncend.md)** **[](iostx-synchdrbeg.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-109">A client calls **[IOSTX::SyncBeg](iostx-syncbeg.md)**, **[IOSTX::SyncEnd](iostx-syncend.md)**, **[IOSTX::SyncHdrBeg](iostx-synchdrbeg.md)**, and **[IOSTX::SyncHdrEnd](iostx-synchdrend.md)** in a sequence to synchronize Outlook 2013 or Outlook 2010 folders and items between a local store and a server.</span></span> <span data-ttu-id="eca19-110">实际的调用顺序取决于需要复制的数据 (例如， Outlook 2013 或 Outlook 2010 文件夹的层次结构、Outlook 2013 或 Outlook 2010 文件夹、邮件项目、日历项目等) 以及同步 (无论是从本地存储上载到服务器还是从服务器下载到本地存储) 。</span><span class="sxs-lookup"><span data-stu-id="eca19-110">The actual sequence of calls depends on the data that needs to be replicated (for example, a hierarchy of Outlook 2013 or Outlook 2010 folders, an Outlook 2013 or Outlook 2010 folder, mail items, calendar items, and so on) and the direction of synchronization (whether uploading from the local store to the server, or downloading from the server to the local store).</span></span> <span data-ttu-id="eca19-111">下面是一个典型的调用序列：</span><span class="sxs-lookup"><span data-stu-id="eca19-111">Here is a typical sequence of calls:</span></span> 
  
1. <span data-ttu-id="eca19-112">客户端调用 **IOSTX：：SyncBeg** 以开始复制，并指定状态标识符和指向相应数据结构地址的指针。</span><span class="sxs-lookup"><span data-stu-id="eca19-112">The client calls **IOSTX::SyncBeg** to begin replication, specifying a state identifier and a pointer to an address of a corresponding data structure.</span></span> 
    
2. <span data-ttu-id="eca19-113">Outlook 2013 或 Outlook 2010 分配数据结构，并初始化包含客户端所需信息的数据结构。</span><span class="sxs-lookup"><span data-stu-id="eca19-113">Outlook 2013 or Outlook 2010 allocates the data structure and initializes the data structure with the necessary information for the client.</span></span> 
    
3. <span data-ttu-id="eca19-114">客户端执行复制，更新数据结构以将有关复制的任何必要信息传达给本地存储。</span><span class="sxs-lookup"><span data-stu-id="eca19-114">The client performs the replication, updating the data structure to convey to the local store any necessary information about the replication.</span></span>
    
4. <span data-ttu-id="eca19-115">执行复制后，客户端调用 **[IOSTX：：SetSyncResult](iostx-setsyncresult.md)** 和 **IOSTX：：SyncEnd** 以通知本地存储特定复制的完成情况。</span><span class="sxs-lookup"><span data-stu-id="eca19-115">After performing the replication, the client calls **[IOSTX::SetSyncResult](iostx-setsyncresult.md)** and **IOSTX::SyncEnd** to notify the local store of the completion of the specific replication.</span></span> 
    
> [!NOTE]
> <span data-ttu-id="eca19-116">客户端始终调用 **IOSTX：：SyncEnd** 以结束客户端已针对特定状态开始进行复制。</span><span class="sxs-lookup"><span data-stu-id="eca19-116">The client always calls **IOSTX::SyncEnd** to end a replication that the client has begun for a certain state.</span></span> <span data-ttu-id="eca19-117">根据客户端需要同步的总体数据，客户端可能会多次调用 **IOSTX：：SyncBeg** 和 **IOSTX：：SyncEnd** 对。</span><span class="sxs-lookup"><span data-stu-id="eca19-117">Depending on the overall data that the client needs to synchronize, the client may call the pair of calls **IOSTX::SyncBeg** and **IOSTX::SyncEnd** more than once.</span></span> 
  
## <a name="state-table"></a><span data-ttu-id="eca19-118">状态表</span><span class="sxs-lookup"><span data-stu-id="eca19-118">State Table</span></span>

> [!NOTE]
> <span data-ttu-id="eca19-119">下表列出了复制状态机中所有有效状态，以及相应的状态标识符和数据结构。</span><span class="sxs-lookup"><span data-stu-id="eca19-119">The following table lists all the valid states in the replication state machine, along with the corresponding state identifiers and data structures.</span></span> <span data-ttu-id="eca19-120">在" **数据复制"** 列中，术语"items"包括邮件、日历、联系人、便笺、日记和任务项目。</span><span class="sxs-lookup"><span data-stu-id="eca19-120">In the **Data Replicated** column, the term "items" includes mail, calendar, contact, note, journal, and task items.</span></span> <span data-ttu-id="eca19-121">将更改从本地存储复制到服务器时，请使用指定"UPLOAD"的状态标识符和前缀为"UP"的数据结构 (例如 **，LR_SYNC_UPLOAD_HIERARCHY** **[UPHIER](uphier.md)** ) 。</span><span class="sxs-lookup"><span data-stu-id="eca19-121">When replicating changes from the local store to the server, use state identifiers specifying "UPLOAD" and data structures with the "UP" prefix (for example, **LR_SYNC_UPLOAD_HIERARCHY** and **[UPHIER](uphier.md)** ).</span></span> <span data-ttu-id="eca19-122">将更改从服务器复制到本地存储时，请使用指定"DOWNLOAD"的状态标识符和前缀为"DN"的数据结构 (例如 LR_SYNC_DOWNLOAD_HIERARCHY 和 **[DNHIER](dnhier.md)** ) 。 </span><span class="sxs-lookup"><span data-stu-id="eca19-122">When replicating changes from the server to the local store, use state identifiers specifying "DOWNLOAD" and data structures with the "DN" prefix (for example, **LR_SYNC_DOWNLOAD_HIERARCHY** and **[DNHIER](dnhier.md)** ).</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="eca19-123">**State**</span><span class="sxs-lookup"><span data-stu-id="eca19-123">**State**</span></span> <br/> |<span data-ttu-id="eca19-124">**数据复制**</span><span class="sxs-lookup"><span data-stu-id="eca19-124">**Data Replicated**</span></span> <br/> |<span data-ttu-id="eca19-125">**状态标识符**</span><span class="sxs-lookup"><span data-stu-id="eca19-125">**State Identifier**</span></span> <br/> |<span data-ttu-id="eca19-126">**数据结构**</span><span class="sxs-lookup"><span data-stu-id="eca19-126">**Data Structure**</span></span> <br/> |
|[<span data-ttu-id="eca19-127">空闲状态</span><span class="sxs-lookup"><span data-stu-id="eca19-127">Idle state</span></span>](idle-state.md) <br/> | <span data-ttu-id="eca19-128">*无*</span><span class="sxs-lookup"><span data-stu-id="eca19-128">*None*</span></span>  <br/> |<span data-ttu-id="eca19-129">**LR_SYNC_IDLE**</span><span class="sxs-lookup"><span data-stu-id="eca19-129">**LR_SYNC_IDLE**</span></span> <br/> | <span data-ttu-id="eca19-130">*无*</span><span class="sxs-lookup"><span data-stu-id="eca19-130">*None*</span></span>  <br/> |
|[<span data-ttu-id="eca19-131">同步状态</span><span class="sxs-lookup"><span data-stu-id="eca19-131">Synchronize state</span></span>](synchronize-state.md) <br/> |<span data-ttu-id="eca19-132">文件夹或项目</span><span class="sxs-lookup"><span data-stu-id="eca19-132">Folders or items</span></span>  <br/> |<span data-ttu-id="eca19-133">**LR_SYNC**</span><span class="sxs-lookup"><span data-stu-id="eca19-133">**LR_SYNC**</span></span> <br/> |<span data-ttu-id="eca19-134">**[SYNC](sync.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-134">**[SYNC](sync.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-135">Upload层次结构状态</span><span class="sxs-lookup"><span data-stu-id="eca19-135">Upload hierarchy state</span></span>](upload-hierarchy-state.md) <br/> |<span data-ttu-id="eca19-136">Folders</span><span class="sxs-lookup"><span data-stu-id="eca19-136">Folders</span></span>  <br/> |<span data-ttu-id="eca19-137">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-137">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-138">**[UPHIER](uphier.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-138">**[UPHIER](uphier.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-139">Upload文件夹状态</span><span class="sxs-lookup"><span data-stu-id="eca19-139">Upload folder state</span></span>](upload-folder-state.md) <br/> |<span data-ttu-id="eca19-140">文件夹</span><span class="sxs-lookup"><span data-stu-id="eca19-140">Folder</span></span>  <br/> |<span data-ttu-id="eca19-141">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-141">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-142">**[UPFLD](upfld.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-142">**[UPFLD](upfld.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-143">同步内容状态</span><span class="sxs-lookup"><span data-stu-id="eca19-143">Synchronize contents state</span></span>](synchronize-contents-state.md) <br/> |<span data-ttu-id="eca19-144">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-144">Items</span></span>  <br/> |<span data-ttu-id="eca19-145">**LR_SYNC_CONTENTS**</span><span class="sxs-lookup"><span data-stu-id="eca19-145">**LR_SYNC_CONTENTS**</span></span> <br/> |<span data-ttu-id="eca19-146">**[SYNCCONT](synccont.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-146">**[SYNCCONT](synccont.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-147">Upload表状态</span><span class="sxs-lookup"><span data-stu-id="eca19-147">Upload table state</span></span>](upload-table-state.md) <br/> |<span data-ttu-id="eca19-148">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-148">Items</span></span>  <br/> |<span data-ttu-id="eca19-149">**LR_SYNC_UPLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="eca19-149">**LR_SYNC_UPLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="eca19-150">**[UPTBL](uptbl.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-150">**[UPTBL](uptbl.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-151">Upload邮件状态</span><span class="sxs-lookup"><span data-stu-id="eca19-151">Upload message state</span></span>](upload-message-state.md) <br/> |<span data-ttu-id="eca19-152">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-152">Item</span></span>  <br/> |<span data-ttu-id="eca19-153">**LR_SYNC_UPLOAD_MESSAGE**</span><span class="sxs-lookup"><span data-stu-id="eca19-153">**LR_SYNC_UPLOAD_MESSAGE**</span></span> <br/> |<span data-ttu-id="eca19-154">**[UPMSG](upmsg.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-154">**[UPMSG](upmsg.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-155">Upload读取状态</span><span class="sxs-lookup"><span data-stu-id="eca19-155">Upload read status state</span></span>](upload-read-status-state.md) <br/> |<span data-ttu-id="eca19-156">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-156">Items</span></span>  <br/> |<span data-ttu-id="eca19-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span><span class="sxs-lookup"><span data-stu-id="eca19-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span></span> <br/> |<span data-ttu-id="eca19-158">**[UPREAD](upread.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-158">**[UPREAD](upread.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-159">Upload删除状态</span><span class="sxs-lookup"><span data-stu-id="eca19-159">Upload delete status state</span></span>](upload-delete-status-state.md) <br/> |<span data-ttu-id="eca19-160">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-160">Items</span></span>  <br/> |<span data-ttu-id="eca19-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span><span class="sxs-lookup"><span data-stu-id="eca19-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span></span> <br/> |<span data-ttu-id="eca19-162">**[UPDEL](updel.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-162">**[UPDEL](updel.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-163">下载层次结构状态</span><span class="sxs-lookup"><span data-stu-id="eca19-163">Download hierarchy state</span></span>](download-hierarchy-state.md) <br/> |<span data-ttu-id="eca19-164">Folders</span><span class="sxs-lookup"><span data-stu-id="eca19-164">Folders</span></span>  <br/> |<span data-ttu-id="eca19-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-166">**[DNHIER](dnhier.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-166">**[DNHIER](dnhier.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-167">下载表状态</span><span class="sxs-lookup"><span data-stu-id="eca19-167">Download table state</span></span>](download-table-state.md) <br/> |<span data-ttu-id="eca19-168">项目</span><span class="sxs-lookup"><span data-stu-id="eca19-168">Items</span></span>  <br/> |<span data-ttu-id="eca19-169">**LR_SYNC_DOWNLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="eca19-169">**LR_SYNC_DOWNLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="eca19-170">**[DNTBL](dntbl.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-170">**[DNTBL](dntbl.md)**</span></span> <br/> |
|[<span data-ttu-id="eca19-171">下载邮件头状态</span><span class="sxs-lookup"><span data-stu-id="eca19-171">Download message header state</span></span>](download-message-header-state.md) <br/> |<span data-ttu-id="eca19-172">邮件头</span><span class="sxs-lookup"><span data-stu-id="eca19-172">Message header</span></span>  <br/> |<span data-ttu-id="eca19-173">**LR_SYNC_DOWNLOAD_HEADER**</span><span class="sxs-lookup"><span data-stu-id="eca19-173">**LR_SYNC_DOWNLOAD_HEADER**</span></span> <br/> |<span data-ttu-id="eca19-174">**[HDRSYNC](hdrsync.md)**</span><span class="sxs-lookup"><span data-stu-id="eca19-174">**[HDRSYNC](hdrsync.md)**</span></span> <br/> |
   
## <a name="state-transition-diagram"></a><span data-ttu-id="eca19-175">状态转换图</span><span class="sxs-lookup"><span data-stu-id="eca19-175">State Transition Diagram</span></span>

<span data-ttu-id="eca19-176">下图显示了在上载或执行完全同步 (下载时发生的状态转换，然后上载) 的文件夹或文件夹内容 (邮件、日历、联系人、便笺、任务或日记项目) 。</span><span class="sxs-lookup"><span data-stu-id="eca19-176">The following diagram shows the state transitions that occur when uploading or performing a full synchronization (downloading followed by uploading) of folders or contents of folders (mail, calendar, contact, note, task, or journal items).</span></span> 
  
<span data-ttu-id="eca19-177">@@@@@NEED此处插入缺少的艺术@@@@@@</span><span class="sxs-lookup"><span data-stu-id="eca19-177">@@@@@NEED TO INSERT ART HERE THAT IS MISSING@@@@@@</span></span>
  
## <a name="example-uploading-a-folder-hierarchy"></a><span data-ttu-id="eca19-178">示例：上载文件夹层次结构</span><span class="sxs-lookup"><span data-stu-id="eca19-178">Example: Uploading a Folder Hierarchy</span></span>

 <span data-ttu-id="eca19-179">上载文件夹层次结构时，将执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="eca19-179">When uploading a hierarchy of folders, the following sequence of steps takes place:</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="eca19-180">**步骤**</span><span class="sxs-lookup"><span data-stu-id="eca19-180">**Step**</span></span> <br/> |<span data-ttu-id="eca19-181">**操作**</span><span class="sxs-lookup"><span data-stu-id="eca19-181">**Action**</span></span> <br/> |<span data-ttu-id="eca19-182">**State**</span><span class="sxs-lookup"><span data-stu-id="eca19-182">**State**</span></span> <br/> |<span data-ttu-id="eca19-183">**相关数据结构**</span><span class="sxs-lookup"><span data-stu-id="eca19-183">**Related Data Structure**</span></span> <br/> |
|<span data-ttu-id="eca19-184">1.</span><span class="sxs-lookup"><span data-stu-id="eca19-184">1.</span></span>  <br/> |<span data-ttu-id="eca19-185">客户端使用 **IOSTX：：SyncBeg 启动层次结构上载**。</span><span class="sxs-lookup"><span data-stu-id="eca19-185">The client initiates the hierarchy upload with **IOSTX::SyncBeg**.</span></span>  <br/> |<span data-ttu-id="eca19-186">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-186">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-187">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="eca19-187">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="eca19-188">2.</span><span class="sxs-lookup"><span data-stu-id="eca19-188">2.</span></span>  <br/> |<span data-ttu-id="eca19-189">Outlook 2013 或 Outlook 2010 会向 **UPHIER 填充** 客户端的信息。</span><span class="sxs-lookup"><span data-stu-id="eca19-189">Outlook 2013 or Outlook 2010 populates **UPHIER** with information for the client.</span></span> <span data-ttu-id="eca19-190">这包括初始化 [out] 参数  *：iEnt*  设置为 0，cEnt  *设置为*  层次结构中需要上载的文件夹数。</span><span class="sxs-lookup"><span data-stu-id="eca19-190">This includes initializing the [out] parameters:  *iEnt*  is set to 0, and  *cEnt*  to the number of folders in the hierarchy that needs uploading.</span></span>  <br/> |<span data-ttu-id="eca19-191">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-191">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-192">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="eca19-192">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="eca19-193">3.</span><span class="sxs-lookup"><span data-stu-id="eca19-193">3.</span></span>  <br/> |<span data-ttu-id="eca19-194">客户端执行实际的层次结构上载。</span><span class="sxs-lookup"><span data-stu-id="eca19-194">The client does the actual hierarchy upload.</span></span> <span data-ttu-id="eca19-195">例如，如果  *cEnt*  为 10，则对于这 10 个文件夹，客户端将调用 **IOSTX：：SyncBeg，** 以指定用于上载文件夹的适当状态标识符和数据结构。</span><span class="sxs-lookup"><span data-stu-id="eca19-195">As an example, if  *cEnt*  is 10, for each of the 10 folders, the client calls **IOSTX::SyncBeg**, specifying the appropriate state identifier and data structure for uploading a folder.</span></span>  <br/> |<span data-ttu-id="eca19-196">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-196">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-197">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="eca19-197">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="eca19-198">4.</span><span class="sxs-lookup"><span data-stu-id="eca19-198">4.</span></span>  <br/> |<span data-ttu-id="eca19-199">Outlook 2013 或 Outlook 2010 通过初始化 UPFLD 的 [out] 参数填充 **UPFLD，** 包括文件夹上载的原因、指向文件夹对象的指针以及文件夹的条目 ID。</span><span class="sxs-lookup"><span data-stu-id="eca19-199">Outlook 2013 or Outlook 2010 populates **UPFLD** by initializing its [out] parameters, including the reason for the folder upload, the pointer to the folder object, and the entry ID for the folder.</span></span>  <br/> |<span data-ttu-id="eca19-200">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-200">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-201">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="eca19-201">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="eca19-202">5.</span><span class="sxs-lookup"><span data-stu-id="eca19-202">5.</span></span>  <br/> |<span data-ttu-id="eca19-203">客户端上载指定的文件夹。</span><span class="sxs-lookup"><span data-stu-id="eca19-203">The client uploads the specified folder.</span></span>  <br/> |<span data-ttu-id="eca19-204">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-204">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-205">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="eca19-205">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="eca19-206">6.</span><span class="sxs-lookup"><span data-stu-id="eca19-206">6.</span></span>  <br/> |<span data-ttu-id="eca19-207">客户端将文件夹上载完成情况通知本地存储：成功后，客户端使用 **UPF_OK** 在 **UPFLD** 中设置 [in] 参数 *ulFlags，* 然后调用 **IOSTX：：SetSyncResult (S_OK)** 和 **IOSTX：：SyncEnd**。</span><span class="sxs-lookup"><span data-stu-id="eca19-207">The client notifies the local store of the completion of the folder upload: Upon success, the client sets the [in] parameter  *ulFlags*  in **UPFLD** with **UPF_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="eca19-208">失败时，客户端不会使用 *"ulFlags"UPF_OK* 标记 **。**</span><span class="sxs-lookup"><span data-stu-id="eca19-208">Upon failure, the client would not set  *ulFlags*  with the **UPF_OK** flag.</span></span> <span data-ttu-id="eca19-209">它调用 **IOSTX：：SetSyncResult**，从而传递 **HRESULT** 值和 **IOSTX：：SyncEnd**。</span><span class="sxs-lookup"><span data-stu-id="eca19-209">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="eca19-210">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-210">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-211">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="eca19-211">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="eca19-212">7.</span><span class="sxs-lookup"><span data-stu-id="eca19-212">7.</span></span>  <br/> |<span data-ttu-id="eca19-213">如果 **UPF_OK，Outlook** 2013 或 Outlook 2010 将清除上载文件夹的内部请求。</span><span class="sxs-lookup"><span data-stu-id="eca19-213">If **UPF_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the folder.</span></span> <span data-ttu-id="eca19-214">然后，无论  *ulFlags*  的状态如何，它都将清理所有内部记帐信息。</span><span class="sxs-lookup"><span data-stu-id="eca19-214">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span> <span data-ttu-id="eca19-215">尽管层次结构中仍有文件夹要上载 (*iEnt* 仍小于 *cEnt*) ，但客户端和 Outlook 2013 或 Outlook 2010 重复步骤 3 至 7。</span><span class="sxs-lookup"><span data-stu-id="eca19-215">While there are still folders in the hierarchy to upload (*iEnt*  is still less than  *cEnt*), the client and Outlook 2013 or Outlook 2010 repeat steps 3 through 7.</span></span>  <br/> |<span data-ttu-id="eca19-216">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="eca19-216">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="eca19-217">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="eca19-217">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="eca19-218">8.</span><span class="sxs-lookup"><span data-stu-id="eca19-218">8.</span></span>  <br/> |<span data-ttu-id="eca19-219">客户端将层次结构上载完成通知本地存储：成功后，客户端使用 **UPH_OK** 在 **UPHIER** 中设置 [in] 标志，然后调用 **IOSTX：：SetSyncResult (S_OK)** 和 **IOSTX：：SyncEnd**。</span><span class="sxs-lookup"><span data-stu-id="eca19-219">The client notifies the local store of the completion of the hierarchy upload: Upon success, the client sets the [in] flag in **UPHIER** with **UPH_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="eca19-220">失败时，客户端不会设置 **UPH_OK标志。**</span><span class="sxs-lookup"><span data-stu-id="eca19-220">Upon failure, the client would not set the **UPH_OK** flag.</span></span> <span data-ttu-id="eca19-221">它调用 **IOSTX：：SetSyncResult**，从而传递 **HRESULT** 值和 **IOSTX：：SyncEnd**。</span><span class="sxs-lookup"><span data-stu-id="eca19-221">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="eca19-222">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-222">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-223">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="eca19-223">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="eca19-224">9.</span><span class="sxs-lookup"><span data-stu-id="eca19-224">9.</span></span>  <br/> |<span data-ttu-id="eca19-225">如果 **UPH_OK，Outlook** 2013 或 Outlook 2010 将清除上载层次结构的内部请求。</span><span class="sxs-lookup"><span data-stu-id="eca19-225">If **UPH_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the hierarchy.</span></span> <span data-ttu-id="eca19-226">然后，无论  *ulFlags*  的状态如何，它都将清理所有内部记帐信息。</span><span class="sxs-lookup"><span data-stu-id="eca19-226">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span>  <br/> |<span data-ttu-id="eca19-227">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="eca19-227">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="eca19-228">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="eca19-228">**UPHIER**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="eca19-229">另请参阅</span><span class="sxs-lookup"><span data-stu-id="eca19-229">See also</span></span>



[<span data-ttu-id="eca19-230">关于复制 API</span><span class="sxs-lookup"><span data-stu-id="eca19-230">About the Replication API</span></span>](about-the-replication-api.md)
  
[<span data-ttu-id="eca19-231">MAPI 常量</span><span class="sxs-lookup"><span data-stu-id="eca19-231">MAPI Constants</span></span>](mapi-constants.md)
  
[<span data-ttu-id="eca19-232">SYNCSTATE</span><span class="sxs-lookup"><span data-stu-id="eca19-232">SYNCSTATE</span></span>](syncstate.md)

