---
title: 关于复制状态计算机
manager: soliver
ms.date: 03/09/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: cf36c6cb-57b4-7b2b-e23d-e0bc8696de96
description: 上次修改时间：2015 年 3 月 9 日
ms.openlocfilehash: 9ea18f8e5c7eb758780727829fb1e18d2a19ec92
ms.sourcegitcommit: 9d60cd82b5413446e5bc8ace2cd689f683fb41a7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/11/2018
ms.locfileid: "19774480"
---
# <a name="about-the-replication-state-machine"></a><span data-ttu-id="5b04d-103">关于复制状态计算机</span><span class="sxs-lookup"><span data-stu-id="5b04d-103">About the Replication State Machine</span></span>

  
  
<span data-ttu-id="5b04d-104">**适用于**： Outlook</span><span class="sxs-lookup"><span data-stu-id="5b04d-104">**Applies to**: Outlook</span></span> 
  
<span data-ttu-id="5b04d-105">本主题包含 Microsoft Outlook 2013 和 Microsoft Outlook 2010 的数据复制的状态机器的概述。</span><span class="sxs-lookup"><span data-stu-id="5b04d-105">This topic contains an overview of the state machine for Microsoft Outlook 2013 and Microsoft Outlook 2010 data replication.</span></span>
  
> [!NOTE]
> <span data-ttu-id="5b04d-106">复制 API 必须完全实现根据本主题中才能成为有用或受支持的说明。</span><span class="sxs-lookup"><span data-stu-id="5b04d-106">The Replication API must be fully implemented according to the instructions in this topic in order to be useful or supported.</span></span> <span data-ttu-id="5b04d-107">以独占方式可以与服务器复制 Outlook 2013 或 Outlook 2010 的更改复制 API。</span><span class="sxs-lookup"><span data-stu-id="5b04d-107">The Replication API is available exclusively to replicate Outlook 2013 or Outlook 2010 changes to and from a server.</span></span> 
  
## <a name="iostx-and-the-state-machine"></a><span data-ttu-id="5b04d-108">IOSTX 和状态机</span><span class="sxs-lookup"><span data-stu-id="5b04d-108">IOSTX and the State Machine</span></span>

<span data-ttu-id="5b04d-109">客户端调用**[IOSTX::SyncBeg](iostx-syncbeg.md)**、 **[IOSTX::SyncEnd](iostx-syncend.md)**、 **[IOSTX::SyncHdrBeg](iostx-synchdrbeg.md)** 和**[IOSTX::SyncHdrEnd](iostx-synchdrend.md)** 同步 Outlook 2013 或 Outlook 2010 中的文件夹和项目的本地存储区和服务器之间的顺序。</span><span class="sxs-lookup"><span data-stu-id="5b04d-109">A client calls **[IOSTX::SyncBeg](iostx-syncbeg.md)**, **[IOSTX::SyncEnd](iostx-syncend.md)**, **[IOSTX::SyncHdrBeg](iostx-synchdrbeg.md)**, and **[IOSTX::SyncHdrEnd](iostx-synchdrend.md)** in a sequence to synchronize Outlook 2013 or Outlook 2010 folders and items between a local store and a server.</span></span> <span data-ttu-id="5b04d-110">实际的调用序列取决于需要 （对于示例、 Outlook 2013 或 Outlook 2010 中的文件夹层次结构、 Outlook 2013 或 Outlook 2010 文件夹、 邮件项目、 日历项和等等） 复制的数据，并同步 （是否将方向从本地存储上载到服务器，或从服务器下载到本地存储）。</span><span class="sxs-lookup"><span data-stu-id="5b04d-110">The actual sequence of calls depends on the data that needs to be replicated (for example, a hierarchy of Outlook 2013 or Outlook 2010 folders, an Outlook 2013 or Outlook 2010 folder, mail items, calendar items, and so on) and the direction of synchronization (whether uploading from the local store to the server, or downloading from the server to the local store).</span></span> <span data-ttu-id="5b04d-111">下面是典型调用序列：</span><span class="sxs-lookup"><span data-stu-id="5b04d-111">Here is a typical sequence of calls:</span></span> 
  
1. <span data-ttu-id="5b04d-112">客户端调用**IOSTX::SyncBeg**开始复制指定的状态标识符和一个指向相应的数据结构的地址。</span><span class="sxs-lookup"><span data-stu-id="5b04d-112">The client calls **IOSTX::SyncBeg** to begin replication, specifying a state identifier and a pointer to an address of a corresponding data structure.</span></span> 
    
2. <span data-ttu-id="5b04d-113">Outlook 2013 或 Outlook 2010 分配的数据结构，并初始化与客户端所需的信息的数据结构。</span><span class="sxs-lookup"><span data-stu-id="5b04d-113">Outlook 2013 or Outlook 2010 allocates the data structure and initializes the data structure with the necessary information for the client.</span></span> 
    
3. <span data-ttu-id="5b04d-114">客户端执行复制，更新要将复制的任何所需信息传达给本地存储的数据结构。</span><span class="sxs-lookup"><span data-stu-id="5b04d-114">The client performs the replication, updating the data structure to convey to the local store any necessary information about the replication.</span></span>
    
4. <span data-ttu-id="5b04d-115">执行复制之后, 客户端调用**[IOSTX::SetSyncResult](iostx-setsyncresult.md)** 和**IOSTX::SyncEnd**通知本地存储的特定的复制完成。</span><span class="sxs-lookup"><span data-stu-id="5b04d-115">After performing the replication, the client calls **[IOSTX::SetSyncResult](iostx-setsyncresult.md)** and **IOSTX::SyncEnd** to notify the local store of the completion of the specific replication.</span></span> 
    
> [!NOTE]
> <span data-ttu-id="5b04d-116">客户端始终调用**IOSTX::SyncEnd**结束客户端的特定状态已开始复制。</span><span class="sxs-lookup"><span data-stu-id="5b04d-116">The client always calls **IOSTX::SyncEnd** to end a replication that the client has begun for a certain state.</span></span> <span data-ttu-id="5b04d-117">根据客户端需要同步的总体数据，客户端可以多次调用**IOSTX::SyncBeg**和**IOSTX::SyncEnd**呼叫的对。</span><span class="sxs-lookup"><span data-stu-id="5b04d-117">Depending on the overall data that the client needs to synchronize, the client may call the pair of calls **IOSTX::SyncBeg** and **IOSTX::SyncEnd** more than once.</span></span> 
  
## <a name="state-table"></a><span data-ttu-id="5b04d-118">状态表</span><span class="sxs-lookup"><span data-stu-id="5b04d-118">State Table</span></span>

> [!NOTE]
> <span data-ttu-id="5b04d-119">下表列出了在复制状态机，以及相应的状态标识符和数据结构中的所有有效状态。</span><span class="sxs-lookup"><span data-stu-id="5b04d-119">The following table lists all the valid states in the replication state machine, along with the corresponding state identifiers and data structures.</span></span> <span data-ttu-id="5b04d-120">在**数据复制**列中，术语"项目"包含邮件、 日历、 联系人、 注释、 日志，和任务项目。</span><span class="sxs-lookup"><span data-stu-id="5b04d-120">In the **Data Replicated** column, the term "items" includes mail, calendar, contact, note, journal, and task items.</span></span> <span data-ttu-id="5b04d-121">时将从本地存储的更改复制到服务器，使用"向上"前缀 （例如， **LR_SYNC_UPLOAD_HIERARCHY**和**[UPHIER](uphier.md)** ） 指定"上载"的状态标识符和数据结构。</span><span class="sxs-lookup"><span data-stu-id="5b04d-121">When replicating changes from the local store to the server, use state identifiers specifying "UPLOAD" and data structures with the "UP" prefix (for example, **LR_SYNC_UPLOAD_HIERARCHY** and **[UPHIER](uphier.md)** ).</span></span> <span data-ttu-id="5b04d-122">当从服务器的更改复制到本地存储区中，使用"DN"前缀 （例如， **LR_SYNC_DOWNLOAD_HIERARCHY**和**[DNHIER](dnhier.md)** ） 指定"下载"的状态标识符和数据结构。</span><span class="sxs-lookup"><span data-stu-id="5b04d-122">When replicating changes from the server to the local store, use state identifiers specifying "DOWNLOAD" and data structures with the "DN" prefix (for example, **LR_SYNC_DOWNLOAD_HIERARCHY** and **[DNHIER](dnhier.md)** ).</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="5b04d-123">**State**</span><span class="sxs-lookup"><span data-stu-id="5b04d-123">**State**</span></span> <br/> |<span data-ttu-id="5b04d-124">**复制数据**</span><span class="sxs-lookup"><span data-stu-id="5b04d-124">**Data Replicated**</span></span> <br/> |<span data-ttu-id="5b04d-125">**状态标识符**</span><span class="sxs-lookup"><span data-stu-id="5b04d-125">**State Identifier**</span></span> <br/> |<span data-ttu-id="5b04d-126">**数据结构**</span><span class="sxs-lookup"><span data-stu-id="5b04d-126">**Data Structure**</span></span> <br/> |
|[<span data-ttu-id="5b04d-127">空闲状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-127">Idle state</span></span>](idle-state.md) <br/> | <span data-ttu-id="5b04d-128">*None*</span><span class="sxs-lookup"><span data-stu-id="5b04d-128">*None*</span></span>  <br/> |<span data-ttu-id="5b04d-129">**LR_SYNC_IDLE**</span><span class="sxs-lookup"><span data-stu-id="5b04d-129">**LR_SYNC_IDLE**</span></span> <br/> | <span data-ttu-id="5b04d-130">*None*</span><span class="sxs-lookup"><span data-stu-id="5b04d-130">*None*</span></span>  <br/> |
|[<span data-ttu-id="5b04d-131">同步状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-131">Synchronize state</span></span>](synchronize-state.md) <br/> |<span data-ttu-id="5b04d-132">文件夹或项目</span><span class="sxs-lookup"><span data-stu-id="5b04d-132">Folders or items</span></span>  <br/> |<span data-ttu-id="5b04d-133">**LR_SYNC**</span><span class="sxs-lookup"><span data-stu-id="5b04d-133">**LR_SYNC**</span></span> <br/> |<span data-ttu-id="5b04d-134">**[SYNC](sync.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-134">**[SYNC](sync.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-135">上载层次结构状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-135">Upload hierarchy state</span></span>](upload-hierarchy-state.md) <br/> |<span data-ttu-id="5b04d-136">文件夹</span><span class="sxs-lookup"><span data-stu-id="5b04d-136">Folders</span></span>  <br/> |<span data-ttu-id="5b04d-137">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-137">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-138">**[UPHIER](uphier.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-138">**[UPHIER](uphier.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-139">上载文件夹状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-139">Upload folder state</span></span>](upload-folder-state.md) <br/> |<span data-ttu-id="5b04d-140">Folder</span><span class="sxs-lookup"><span data-stu-id="5b04d-140">Folder</span></span>  <br/> |<span data-ttu-id="5b04d-141">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-141">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-142">**[UPFLD](upfld.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-142">**[UPFLD](upfld.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-143">同步内容状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-143">Synchronize contents state</span></span>](synchronize-contents-state.md) <br/> |<span data-ttu-id="5b04d-144">Items</span><span class="sxs-lookup"><span data-stu-id="5b04d-144">Items</span></span>  <br/> |<span data-ttu-id="5b04d-145">**LR_SYNC_CONTENTS**</span><span class="sxs-lookup"><span data-stu-id="5b04d-145">**LR_SYNC_CONTENTS**</span></span> <br/> |<span data-ttu-id="5b04d-146">**[SYNCCONT](synccont.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-146">**[SYNCCONT](synccont.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-147">上载表状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-147">Upload table state</span></span>](upload-table-state.md) <br/> |<span data-ttu-id="5b04d-148">Items</span><span class="sxs-lookup"><span data-stu-id="5b04d-148">Items</span></span>  <br/> |<span data-ttu-id="5b04d-149">**LR_SYNC_UPLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="5b04d-149">**LR_SYNC_UPLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="5b04d-150">**[UPTBL](uptbl.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-150">**[UPTBL](uptbl.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-151">上载邮件状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-151">Upload message state</span></span>](upload-message-state.md) <br/> |<span data-ttu-id="5b04d-152">Item</span><span class="sxs-lookup"><span data-stu-id="5b04d-152">Item</span></span>  <br/> |<span data-ttu-id="5b04d-153">**LR_SYNC_UPLOAD_MESSAGE**</span><span class="sxs-lookup"><span data-stu-id="5b04d-153">**LR_SYNC_UPLOAD_MESSAGE**</span></span> <br/> |<span data-ttu-id="5b04d-154">**[UPMSG](upmsg.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-154">**[UPMSG](upmsg.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-155">上载读取状态状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-155">Upload read status state</span></span>](upload-read-status-state.md) <br/> |<span data-ttu-id="5b04d-156">Items</span><span class="sxs-lookup"><span data-stu-id="5b04d-156">Items</span></span>  <br/> |<span data-ttu-id="5b04d-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span><span class="sxs-lookup"><span data-stu-id="5b04d-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span></span> <br/> |<span data-ttu-id="5b04d-158">**[UPREAD](upread.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-158">**[UPREAD](upread.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-159">上载删除状态状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-159">Upload delete status state</span></span>](upload-delete-status-state.md) <br/> |<span data-ttu-id="5b04d-160">Items</span><span class="sxs-lookup"><span data-stu-id="5b04d-160">Items</span></span>  <br/> |<span data-ttu-id="5b04d-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span><span class="sxs-lookup"><span data-stu-id="5b04d-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span></span> <br/> |<span data-ttu-id="5b04d-162">**[UPDEL](updel.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-162">**[UPDEL](updel.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-163">下载层次结构状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-163">Download hierarchy state</span></span>](download-hierarchy-state.md) <br/> |<span data-ttu-id="5b04d-164">文件夹</span><span class="sxs-lookup"><span data-stu-id="5b04d-164">Folders</span></span>  <br/> |<span data-ttu-id="5b04d-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-166">**[DNHIER](dnhier.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-166">**[DNHIER](dnhier.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-167">下载表状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-167">Download table state</span></span>](download-table-state.md) <br/> |<span data-ttu-id="5b04d-168">Items</span><span class="sxs-lookup"><span data-stu-id="5b04d-168">Items</span></span>  <br/> |<span data-ttu-id="5b04d-169">**LR_SYNC_DOWNLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="5b04d-169">**LR_SYNC_DOWNLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="5b04d-170">**[DNTBL](dntbl.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-170">**[DNTBL](dntbl.md)**</span></span> <br/> |
|[<span data-ttu-id="5b04d-171">下载邮件头状态</span><span class="sxs-lookup"><span data-stu-id="5b04d-171">Download message header state</span></span>](download-message-header-state.md) <br/> |<span data-ttu-id="5b04d-172">邮件头</span><span class="sxs-lookup"><span data-stu-id="5b04d-172">Message header</span></span>  <br/> |<span data-ttu-id="5b04d-173">**LR_SYNC_DOWNLOAD_HEADER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-173">**LR_SYNC_DOWNLOAD_HEADER**</span></span> <br/> |<span data-ttu-id="5b04d-174">**[HDRSYNC](hdrsync.md)**</span><span class="sxs-lookup"><span data-stu-id="5b04d-174">**[HDRSYNC](hdrsync.md)**</span></span> <br/> |
   
## <a name="state-transition-diagram"></a><span data-ttu-id="5b04d-175">状态转换关系图</span><span class="sxs-lookup"><span data-stu-id="5b04d-175">State Transition Diagram</span></span>

<span data-ttu-id="5b04d-176">下图显示上载或的文件夹或文件夹 （邮件、 日历、 联系人、 注释、 任务或日记项目） 的内容执行完全同步 （下载上载后跟） 时发生的状态转换。</span><span class="sxs-lookup"><span data-stu-id="5b04d-176">The following diagram shows the state transitions that occur when uploading or performing a full synchronization (downloading followed by uploading) of folders or contents of folders (mail, calendar, contact, note, task, or journal items).</span></span> 
  
<span data-ttu-id="5b04d-177">插入图片此处缺少到 @@@NEED。</span><span class="sxs-lookup"><span data-stu-id="5b04d-177">@@@@@NEED TO INSERT ART HERE THAT IS MISSING@@@@@@</span></span>
  
## <a name="example-uploading-a-folder-hierarchy"></a><span data-ttu-id="5b04d-178">示例： 上载文件夹层次结构</span><span class="sxs-lookup"><span data-stu-id="5b04d-178">Example: Uploading a Folder Hierarchy</span></span>

 <span data-ttu-id="5b04d-179">当上载文件夹层次结构，下面的步骤顺序发生：</span><span class="sxs-lookup"><span data-stu-id="5b04d-179">When uploading a hierarchy of folders, the following sequence of steps takes place:</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="5b04d-180">**步骤**</span><span class="sxs-lookup"><span data-stu-id="5b04d-180">**Step**</span></span> <br/> |<span data-ttu-id="5b04d-181">**操作**</span><span class="sxs-lookup"><span data-stu-id="5b04d-181">**Action**</span></span> <br/> |<span data-ttu-id="5b04d-182">**State**</span><span class="sxs-lookup"><span data-stu-id="5b04d-182">**State**</span></span> <br/> |<span data-ttu-id="5b04d-183">**相关的数据结构**</span><span class="sxs-lookup"><span data-stu-id="5b04d-183">**Related Data Structure**</span></span> <br/> |
|<span data-ttu-id="5b04d-184">1。</span><span class="sxs-lookup"><span data-stu-id="5b04d-184">1.</span></span>  <br/> |<span data-ttu-id="5b04d-185">客户端启动与**IOSTX::SyncBeg**层次结构上载。</span><span class="sxs-lookup"><span data-stu-id="5b04d-185">The client initiates the hierarchy upload with **IOSTX::SyncBeg**.</span></span>  <br/> |<span data-ttu-id="5b04d-186">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-186">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-187">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-187">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="5b04d-188">2。</span><span class="sxs-lookup"><span data-stu-id="5b04d-188">2.</span></span>  <br/> |<span data-ttu-id="5b04d-189">Outlook 2013 或 Outlook 2010 填充**UPHIER**与客户端的信息。</span><span class="sxs-lookup"><span data-stu-id="5b04d-189">Outlook 2013 or Outlook 2010 populates **UPHIER** with information for the client.</span></span> <span data-ttu-id="5b04d-190">这包括初始化 [out] 的参数： *iEnt*设置为 0 度和 *%* 到需要上载层次结构中的文件夹的数目。</span><span class="sxs-lookup"><span data-stu-id="5b04d-190">This includes initializing the [out] parameters:  *iEnt*  is set to 0, and  *cEnt*  to the number of folders in the hierarchy that needs uploading.</span></span>  <br/> |<span data-ttu-id="5b04d-191">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-191">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-192">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-192">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="5b04d-193">3.</span><span class="sxs-lookup"><span data-stu-id="5b04d-193">3.</span></span>  <br/> |<span data-ttu-id="5b04d-194">客户端执行的实际层次结构上载。</span><span class="sxs-lookup"><span data-stu-id="5b04d-194">The client does the actual hierarchy upload.</span></span> <span data-ttu-id="5b04d-195">例如，如果 *%* 为 10，为每个 10 的文件夹中，客户端调用**IOSTX::SyncBeg**，指定相应的状态标识符和数据结构，用于上载一个文件夹。</span><span class="sxs-lookup"><span data-stu-id="5b04d-195">As an example, if  *cEnt*  is 10, for each of the 10 folders, the client calls **IOSTX::SyncBeg**, specifying the appropriate state identifier and data structure for uploading a folder.</span></span>  <br/> |<span data-ttu-id="5b04d-196">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-196">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-197">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="5b04d-197">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="5b04d-198">4。</span><span class="sxs-lookup"><span data-stu-id="5b04d-198">4.</span></span>  <br/> |<span data-ttu-id="5b04d-199">Outlook 2013 或 Outlook 2010 填充**UPFLD**初始化其 [out] 的参数，包括文件夹上载，该指针指向 folder 对象，其原因和文件夹的条目 ID。</span><span class="sxs-lookup"><span data-stu-id="5b04d-199">Outlook 2013 or Outlook 2010 populates **UPFLD** by initializing its [out] parameters, including the reason for the folder upload, the pointer to the folder object, and the entry ID for the folder.</span></span>  <br/> |<span data-ttu-id="5b04d-200">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-200">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-201">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="5b04d-201">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="5b04d-202">5。</span><span class="sxs-lookup"><span data-stu-id="5b04d-202">5.</span></span>  <br/> |<span data-ttu-id="5b04d-203">客户端上载指定的文件夹。</span><span class="sxs-lookup"><span data-stu-id="5b04d-203">The client uploads the specified folder.</span></span>  <br/> |<span data-ttu-id="5b04d-204">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-204">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-205">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="5b04d-205">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="5b04d-206">6。</span><span class="sxs-lookup"><span data-stu-id="5b04d-206">6.</span></span>  <br/> |<span data-ttu-id="5b04d-207">客户端通知的本地文件夹上载完成存储： 一旦成功，客户端设置 [in] 参数*ulFlags* **UPFLD**与**UPF_OK**，然后调用**IOSTX::SetSyncResult (S_OK)** 和**IOSTX::SyncEnd 中**.</span><span class="sxs-lookup"><span data-stu-id="5b04d-207">The client notifies the local store of the completion of the folder upload: Upon success, the client sets the [in] parameter  *ulFlags*  in **UPFLD** with **UPF_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="5b04d-208">遇到故障，客户端未设置*ulFlags*与**UPF_OK**标志。</span><span class="sxs-lookup"><span data-stu-id="5b04d-208">Upon failure, the client would not set  *ulFlags*  with the **UPF_OK** flag.</span></span> <span data-ttu-id="5b04d-209">它调用**IOSTX::SetSyncResult**，传递的**HRESULT**值和**IOSTX::SyncEnd**中。</span><span class="sxs-lookup"><span data-stu-id="5b04d-209">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="5b04d-210">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-210">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-211">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="5b04d-211">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="5b04d-212">7。</span><span class="sxs-lookup"><span data-stu-id="5b04d-212">7.</span></span>  <br/> |<span data-ttu-id="5b04d-213">如果设置**UPF_OK** ，Outlook 2013 或 Outlook 2010 将清除上载文件夹的内部请求。</span><span class="sxs-lookup"><span data-stu-id="5b04d-213">If **UPF_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the folder.</span></span> <span data-ttu-id="5b04d-214">然后*ulFlags*的状态，无论它将清除任何内部记帐信息。</span><span class="sxs-lookup"><span data-stu-id="5b04d-214">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span> <span data-ttu-id="5b04d-215">要上载的层次结构中还有文件夹时 （*iEnt*是仍小于 *%*），在客户端和 Outlook 2013 或 Outlook 2010 重复步骤 3 至 7。</span><span class="sxs-lookup"><span data-stu-id="5b04d-215">While there are still folders in the hierarchy to upload (*iEnt*  is still less than  *cEnt*), the client and Outlook 2013 or Outlook 2010 repeat steps 3 through 7.</span></span>  <br/> |<span data-ttu-id="5b04d-216">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-216">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="5b04d-217">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="5b04d-217">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="5b04d-218">8。</span><span class="sxs-lookup"><span data-stu-id="5b04d-218">8.</span></span>  <br/> |<span data-ttu-id="5b04d-219">客户端通知的层次结构上载完成的本地存储： 一旦成功，客户端设置 [in] **IOSTX::SetSyncResult (S_OK)** 和**IOSTX::SyncEnd**中与**UPH_OK**，然后调用**UPHIER**标记。</span><span class="sxs-lookup"><span data-stu-id="5b04d-219">The client notifies the local store of the completion of the hierarchy upload: Upon success, the client sets the [in] flag in **UPHIER** with **UPH_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="5b04d-220">遇到故障，客户端不会设置**UPH_OK**标志。</span><span class="sxs-lookup"><span data-stu-id="5b04d-220">Upon failure, the client would not set the **UPH_OK** flag.</span></span> <span data-ttu-id="5b04d-221">它调用**IOSTX::SetSyncResult**，传递的**HRESULT**值和**IOSTX::SyncEnd**中。</span><span class="sxs-lookup"><span data-stu-id="5b04d-221">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="5b04d-222">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-222">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-223">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-223">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="5b04d-224">9。</span><span class="sxs-lookup"><span data-stu-id="5b04d-224">9.</span></span>  <br/> |<span data-ttu-id="5b04d-225">如果设置**UPH_OK** ，Outlook 2013 或 Outlook 2010 将清除上载层次结构的内部请求。</span><span class="sxs-lookup"><span data-stu-id="5b04d-225">If **UPH_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the hierarchy.</span></span> <span data-ttu-id="5b04d-226">然后*ulFlags*的状态，无论它将清除任何内部记帐信息。</span><span class="sxs-lookup"><span data-stu-id="5b04d-226">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span>  <br/> |<span data-ttu-id="5b04d-227">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="5b04d-227">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="5b04d-228">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="5b04d-228">**UPHIER**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="5b04d-229">另请参阅</span><span class="sxs-lookup"><span data-stu-id="5b04d-229">See also</span></span>



[<span data-ttu-id="5b04d-230">关于复制 API</span><span class="sxs-lookup"><span data-stu-id="5b04d-230">About the Replication API</span></span>](about-the-replication-api.md)
  
[<span data-ttu-id="5b04d-231">MAPI 常量</span><span class="sxs-lookup"><span data-stu-id="5b04d-231">MAPI Constants</span></span>](mapi-constants.md)
  
[<span data-ttu-id="5b04d-232">SYNCSTATE</span><span class="sxs-lookup"><span data-stu-id="5b04d-232">SYNCSTATE</span></span>](syncstate.md)

